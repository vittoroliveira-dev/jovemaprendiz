/* /assets/css/components/_c-header.css */
@layer components {
  .c-header{
    position: sticky; 
		top: 0;
		min-height:64px
    height: var(--header-height);
    background: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
    z-index: 1000;
    transition: background-color var(--transition-base,.2s ease),
                box-shadow var(--transition-base,.2s ease);
  }

  .c-header .o-container{
    display:flex; justify-content:space-between; align-items:center; height:100%;
    container-type:inline-size;
    padding-inline:
      max(clamp(12px,4vw,32px), env(safe-area-inset-left))
      max(clamp(12px,4vw,32px), env(safe-area-inset-right));
    gap: var(--space-md,1rem);
  }
  .c-header__right{ margin-left:auto; display:flex; align-items:center; gap:var(--space-md,1rem); }
  .c-header__actions{ display:flex; align-items:center; gap:var(--space-md,1rem); }

  /* Estado ao rolar */
  .c-header.is-scrolled{
    background: color-mix(in srgb, var(--color-surface) 98%, transparent);
    box-shadow: var(--shadow-md, 0 2px 20px rgba(0,0,0,.1));
    border-bottom-color: var(--color-border);
  }

  /* Tipografia dos links do nav dentro do header */
  .c-header .c-nav__link{ 
  font: inherit; 
  font-weight:600; 
  text-shadow:none; }
  .c-header .c-nav__link--pill,
  .c-header .c-nav__link[aria-haspopup="menu"]{ font-weight:700; }

  /* Compensação do FAB no desktop */
  @media (min-width:769px){
    .c-header .o-container{
      padding-inline-end: calc(max(clamp(12px,4vw,32px), env(safe-area-inset-right)) + 72px);
    }
  }

  /* Preferências/compat */
  @media (prefers-reduced-motion: reduce){ .c-header{ transition:none; } }
  @media (forced-colors: active){ .c-header{ border-bottom:1px solid CanvasText; } }
  @supports (backdrop-filter: blur(8px)){ .c-header{ backdrop-filter:none; } }

  /* Estado controlado via <html> (script) */
  html.over-hero .c-header,
  html.over-hero .c-header.is-scrolled{
    background: transparent !important;
    border-bottom-color: transparent !important;
    box-shadow: none !important;
  }

  html:not(.over-hero) .c-header.is-scrolled .c-nav__link:hover,
  html:not(.over-hero) .c-header.is-scrolled .c-nav__link:focus-visible{
    color: color-mix(in srgb, var(--color-text, #111) 80%, var(--color-primary, #0056b3));
  }

  /* Elevação com menu móvel aberto */
  .c-header:has(.c-nav.is-open){ box-shadow: var(--shadow-lg, 0 6px 30px rgba(0,0,0,.18)); }

  /* Compat com .c-header--transparent (se existir) */
  .c-header--transparent:not(.is-scrolled){
    background: transparent;
    border-bottom-color: transparent;
  }
  .c-header--transparent:not(.is-scrolled) .c-header__brand{
    filter: drop-shadow(0 1px 2px rgba(0,0,0,.35));
  }

  /* Hero encostado no header (apenas o adjacente) */
  .c-header + *{ margin-top:0 !important; }

  /* Oculta a marca quando header está sobre o hero (sem causar shift) */
  html.over-hero .c-brand,
  html.over-hero .c-brand__logo{
    opacity: 0; visibility: hidden; pointer-events: none;
  }
  .c-brand{ transition: opacity .2s ease, visibility .2s ease; }
}

