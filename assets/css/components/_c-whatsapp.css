/* ========================================================================
   PRISMA TALENTOS | CSS/COMPONENTS/C WHATSAPP (final)
   ======================================================================== */
@layer components {
  .c-btn-whatsapp {
    position: fixed;
    /* posicionamento lógico + safe-area */
    inset-block-start: calc(var(--header-height) - (var(--hero-notch-size) / 2));
    inset-inline-end: max(var(--space-lg), env(safe-area-inset-right));
    z-index: 1001;
    outline: none;

    /* visual */
    display: grid;
    place-items: center;
    width: var(--hero-notch-size);
    height: var(--hero-notch-size);
    border-radius: 50%;
    background-color: var(--color-wa);
    color: var(--color-surface);
    box-shadow: var(--shadow-md);
    text-decoration: none;

    /* interação */
    transition:
      transform var(--transition-base),
      background-color var(--transition-base),
      box-shadow var(--transition-base);
  }

  .c-btn-whatsapp:hover {
    background-color: var(--color-wa-hover);
    transform: translateY(-3px) scale(1.05);
    box-shadow: var(--shadow-lg);
    text-decoration: none;
  }
  .c-btn-whatsapp:focus-visible {
    outline: 2px solid var(--color-surface);
    outline-offset: 2px;
  }

  .c-btn-whatsapp:active {
    transform: translateY(1px) scale(1);
    box-shadow: var(--shadow-sm);
  }

  .c-btn-whatsapp .c-icon {
    width: calc(var(--hero-notch-size) / 2);
    height: calc(var(--hero-notch-size) / 2);
    /* garante ícone branco via currentColor */
    fill: currentColor;
  }

  /* variante lado esquerdo */
  .c-btn-whatsapp--left {
    inset-inline-start: max(var(--space-lg), env(safe-area-inset-left));
    inset-inline-end: auto;
  }

   /* --- ESTILOS PARA DESKTOP (> 768px) --- */
  .c-btn-whatsapp {
    /* Posicionamento superior direito */
    inset-block-start: calc(var(--header-height) - (var(--hero-notch-size) / 2));
    inset-inline-end: max(var(--space-lg), env(safe-area-inset-right));
    
    /* Tamanho baseado em variáveis do tema */
    width: var(--hero-notch-size);
    height: var(--hero-notch-size);
  }

  .c-btn-whatsapp .c-icon {
    width: calc(var(--hero-notch-size) / 2);
    height: calc(var(--hero-notch-size) / 2);
    fill: currentColor;
  }

  .c-btn-whatsapp:hover {
    background-color: var(--color-wa-hover, #128C7E);
    transform: translateY(-3px) scale(1.05);
    box-shadow: var(--shadow-lg);
  }

  /* --- ESTILOS PARA MOBILE (<= 768px) --- */
  @media (max-width: 768px) {
    .c-btn-whatsapp {
      /* Posicionamento inferior direito */
      inset-block-start: auto; /* Reseta o posicionamento do topo */
      inset-inline-end: max(var(--space-lg), env(safe-area-inset-right));
      inset-block-end: max(var(--space-lg), env(safe-area-inset-bottom));

      /* Tamanho fixo para mobile */
      width: 56px;
      height: 56px;
    }

    .c-btn-whatsapp .c-icon {
      width: 60%;
      height: 60%;
    }
  }

  /* ... (outras regras de acessibilidade e print) ... */

  @media (prefers-reduced-motion: reduce) {
    .c-btn-whatsapp { transition: none; }
    .c-btn-whatsapp:hover { transform: none; }
  }

  @media print { 
    .c-btn-whatsapp { display: none; } 
  }
}