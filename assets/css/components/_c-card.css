/* ========================================================================
   PRISMA TALENTOS | CSS/COMPONENTS/C CARD — FUSÃO
   Critérios: A11y foco, hover só em devices com hover, reduced-motion.
   ======================================================================== */
@layer components {
  .c-card{
    background: var(--color-surface);
    border-radius: var(--radius-lg, 12px);
    padding: var(--space-xl, 24px);
    box-shadow: var(--shadow-md);
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-sm, 8px);
    text-align: left;
    color: var(--color-text);
  }

  .c-card__title{
    font-size: 1.25rem;
    font-weight: var(--font-weight-bold, 700);
    color: var(--color-primary);
    margin: 0 0 var(--space-sm, 8px);
    line-height: 1.3;
  }

  .c-card__text{
    margin: 0;
    color: var(--color-text-muted);
    line-height: 1.6;
  }

  .c-card__icon{
    width: 48px;
    height: 48px;
    color: var(--color-secondary);
    margin-bottom: var(--space-md, 16px);
    flex: 0 0 auto;
  }

  /* Interação acessível: foco visível */
  .c-card:is(a,button,[role="button"],[role="link"]),
  .c-card.c-card--interactive{ outline: none; }
  .c-card:is(a,button,[role="button"],[role="link"]):focus-visible,
  .c-card.c-card--interactive:focus-visible{
    outline: 2px solid var(--color-primary);
    outline-offset: 3px;
  }

  /* Hover/elevate apenas onde há hover real */
  @media (hover:hover){
    .c-card:is(a,button,[role="button"],[role="link"]),
    .c-card.c-card--interactive{
      transition: transform var(--transition-base, .2s ease), box-shadow var(--transition-base, .2s ease);
    }
    .c-card:is(a,button,[role="button"],[role="link"]):hover,
    .c-card.c-card--interactive:hover{
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }
  }

  /* Respeita reduced-motion */
  @media (prefers-reduced-motion: reduce){
    .c-card{ transition: none !important; }
  }

  /* Mídia dentro do card */
  .c-card img{ max-width: 100%; height: auto; border-radius: calc(var(--radius-lg, 12px) - 4px); display:block; }
}

/* Grid responsivo para listas de cards */
.c-card-grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: var(--space-lg, 20px);
  align-items: stretch;
}

/* Link de card “full-click” sem HTML complexo */
.c-card--interactive{ position: relative; }
.c-card--interactive > .c-card__link{
  position:absolute; inset:0; border-radius:inherit; z-index:1;
}
.c-card--interactive > *:not(.c-card__link){ position:relative; z-index:2; }
.c-card--interactive > .c-card__link:focus-visible{
  outline:2px solid var(--color-primary); outline-offset:3px; border-radius:inherit;
}

/* Mídia com reserva de espaço (evita CLS) */
.c-card__media{
  aspect-ratio: 16 / 9;
  overflow:hidden;
  border-radius: calc(var(--radius-lg, 12px) - 4px);
}
.c-card__media > img{
  width:100%; height:100%; object-fit:cover; display:block;
}

/* Performance em listas longas */
@supports (content-visibility: auto){
  .c-card{ content-visibility:auto; contain-intrinsic-size: 240px; }
}

/* Acessibilidade: alto contraste e dark */
@media (prefers-contrast: more){
  .c-card{ box-shadow:none; border:1px solid currentColor; }
}
@media (prefers-color-scheme: dark){
  .c-card{ box-shadow: var(--shadow-sm); border:1px solid color-mix(in srgb, #fff 8%, transparent); }
}

/* Estado selecionado/destacado (navegação por teclado ou filtro) */
.c-card[aria-selected="true"],
.c-card[aria-current="page"]{
  outline:2px solid color-mix(in srgb, var(--color-primary) 55%, transparent);
  outline-offset:2px;
  box-shadow: var(--shadow-lg);
}

/* Cursor e feedback de toque */
.c-card--interactive,
.c-card--interactive > .c-card__link{ cursor: pointer; -webkit-tap-highlight-color: rgba(0,0,0,.12); }

/* Foco: fallback para navegadores sem :focus-visible */
.c-card.c-card--interactive:focus{ outline: 2px solid var(--color-primary); outline-offset: 3px; }

/* Forced-colors (alto contraste Windows) */
@media (forced-colors: active){
  .c-card{ box-shadow: none; border: 1px solid CanvasText; background: Canvas; color: CanvasText; }
  .c-card--interactive > .c-card__link:focus{ outline: 2px solid CanvasText; outline-offset: 3px; }
}

/* Print: remove sombras e fundos pesados */
@media print{
  .c-card{ box-shadow: none !important; background: transparent !important; }
}

@supports not selector(:focus-visible){
  .c-card.c-card--interactive:focus{ outline:2px solid var(--color-primary); outline-offset:3px; }
}

/* Evita duplicar hover/transition quando há .c-card__link e também .c-card--interactive */
@supports selector(:has(.c-card__link)){
  @media (hover:hover){
    .c-card:has(.c-card__link):not(.c-card--interactive){
      transition: transform var(--transition-base, .2s ease), box-shadow var(--transition-base, .2s ease);
    }
    .c-card:has(.c-card__link):not(.c-card--interactive):hover{
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }
  }
}
